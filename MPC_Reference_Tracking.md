# MPC Reference Tracking

<p align="right">
최초 작성일 : 2025-01-14 / 마지막 수정일 : 2025-01-14
</p>

## 1. Reference Tracking 정리  

MPC(모델 예측 제어)는 시스템의 출력이 특정 값(set point)을 추적하도록 설계할 수 있다. 시스템이 다음과 같이 주어졌다고 가정하자.

$$
\begin{align*}
x_{k+1} & = Ax_{k} + Bu_{k} \\
y_{k} &= Cx_{k}
\end{align*}
$$

여기서
- $x_k$: 시스템 상태 변수
- $u_k$: 제어 입력
- $y_k$: 시스템 출력

을 각각 의미한다. MPC의 목표는 시스템 출력 $y_{k}$가 설정된 참조값 $r$로 수렴하도록 제어하는 것이다. 참조값 $r$이 상수일 때, 제어 목표는 아래와 같이 표현된다.

$$
y_{k} \to r \quad \text{as} \quad k \to \infty
$$

이 목표는 정상 상태(Steady-state)에서 출력 $y_{k}$와 참조값 $r$ 간의 차이를 $0$으로 만드는 것을 의미하고, 이 조건을 zero offset이라고 한다. 이 조건을 만족하기 위해서는 입력 변수의 수 $n_u$가 출력 변수의 수 $n_y$ 이상이여야 한다.

$$
n_u \geq n_y
$$

참조값 $r$에 따라 두 가지 상황이 발생한다. 먼저, $r = 0$인 경우, 시간 $k$가 증가함에 따라 출력 $y_k$, 상태 $x_k$, 제어 입력 $u_k$ 모두 0으로 수렴한다. 하지만, $r \neq 0$인 경우 출력 $y_k$는 참조 값 $r$로 수렴하지만, 상태 $x_k$와 제어 입력 $u_k$가 0으로 수렴한다고는 보장할 수 없다. 이 문제를 해결하기 위해 비용 함수에 상태와 제어 입력의 차이를 최소화하는 항(penalize)을 추가하여 설계할 수 있다.

## 2. 
